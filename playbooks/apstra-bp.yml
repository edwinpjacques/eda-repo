---
- name: publish updated policy
  hosts: localhost
  connection: httpapi
  gather_facts: no

  tasks:
    - name: get list of blueprint
      uri:
        url: "https://10.88.140.218/api/blueprints"
        method: GET
        follow_redirects: all
        return_content: yes
        status_code: 200
        headers:
          Content-Type: application/json
          AUTHTOKEN: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwidXNlcl9zZXNzaW9uIjoiOTgyYjU3MjgtNzE0Yy00NmY5LWE5NjEtZDM2NjBiNDMxYmQ2IiwiY3JlYXRlZF9hdCI6IjIwMjQtMDgtMDdUMTA6MzY6MTEuNTYxMzcyIiwiZXhwIjoxNzIzMTEzMzcxfQ.eTmPzsVJdMwUbwMTH8O6OP9f56h2QgZXnl6TPvYcF8Yk8yD0NxNxWdajHCxNc1L5vzhaSeEbqLuvZCUtkrrhww
        validate_certs:  false
      register: blueprint
      
    - name: display list of blueprint
      debug:
        msg: "{{ blueprint.json }}"
    
